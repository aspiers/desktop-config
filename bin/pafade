#!/bin/bash

safe_pavol () {
    if ! pavol "$@"; then
        echo >&2 "ERROR: pavol $* failed; aborting."
        exit 1
    fi
}

pa_silent () {
    # bash sucks!
    curvol=$( safe_pavol get ) || exit $?
    echo "$curvol"
    [ "$curvol" = '0x000' ]
}

while ! pa_silent; do
    safe_pavol quieter
    sleep 10
done

~/.rvm/bin/rvm 1.9.3 do spotify-dbus PlayPause

safe_pavol set 0x9000
