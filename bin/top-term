#!/bin/sh
. $ZDOTDIR/lib/libfonts.sh

#Eterm -t top
unset COLUMNS

geometry=140x60
theme=$(<~/.config/gnome-terminal-profile)
profile=${theme:-Dark}

while true; do
    case "$1" in
        --geometry)
            geometry="$2"
            shift 2
            ;;
        --title)
            title="$2"
            shift 2
            ;;
        --large)
            font_size=large
            shift
            ;;
        --xl)
            font_size=xl
            shift
            ;;
        --)
            shift
            break
            ;;
        *)
            break
            ;;
    esac
done

: ${title:="$*"}
: ${role:="$title"}

cmd="${1:-top}"
[ -n "$1" ] && shift

#urxvt-256color -fn $small_font -geometry $geometry -e "$cmd" "$@"
zoom_option=""
case "$font_size" in
    "")
        # Default: small font from medium base
        zoom_option="--zoom $small_font_gnome_zoom_from_medium"
        ;;
    large)
        # Large font from medium base
        zoom_option="--zoom $large_font_gnome_zoom_from_medium"
        ;;
    xl)
        # XL font from medium base
        zoom_option="--zoom $xl_font_gnome_zoom_from_medium"
        ;;
esac

gnome-terminal \
    --profile=$profile \
    $zoom_option \
    --geometry $geometry \
    --role "$role" \
    --title "$title" \
    -- \
    "$cmd" "$@"
