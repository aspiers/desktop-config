#!/bin/sh

echo "### .xsession-progs ..."

. ~/lib/libproc.sh

echo "### Xmodmap ..."
if [ -z "$VNCDESKTOP" ]; then
  . $ZDOT_RUN_HOOKS .Xmodmap.d
else
  echo "\$VNCDESKTOP is $VNCDESKTOP, not running .Xmodmap hooks"
fi

echo "### Xresources ..."
if [ -e ~/.Xresources/all.rdb ]; then
  xrdb-as -merge ~/.Xresources/all.rdb && echo "merged all.rdb"
else
  echo "no all.rdb"
fi

echo "### Mouse ..."
xset m 2 4

echo "### Keyboard ..."
xset r rate 180 50

if executable_p Esetroot; then
  run_if_executable retrieve_background
#  run_if_executable randomise_background
fi

#run_if_executable ~/bin/xwrits &
run_if_executable workrave &

# FIXME: issues relating to kde/sawfish combo?
#run_if_executable xscreensaver -no-splash &

echo "### watchlogs ..."
run_if_executable watchlogs-system &

echo "### gkrellm ..."
[ -z "$VNCDESKTOP" ] && run_if_executable gkrellm -geometry -0+0 &
#run_if_executable 3ddesk &

if [ -n "$KDE_FULL_SESSION" ]; then
  echo "### knetworkmanager ..."
  run_unless_running knetworkmanager &
else
  echo "not in kde, not launching knetworkmanager"
fi

# Other programs to run:
#   gaim / kopete
#   xmms
#   xchat
#   kgpg
#   
. $ZDOT_RUN_HOOKS .xsession-progs.d &

